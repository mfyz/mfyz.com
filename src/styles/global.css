/*
  The CSS in this style tag is based off of Bear Blog's default CSS.
  https://github.com/HermanMartinus/bearblog/blob/297026a877bc2ab2b3bdfbd6b9f7961c350917dd/templates/styles/blog/default.css
  License MIT: https://github.com/HermanMartinus/bearblog/blob/master/LICENSE.md
 */

/* https://www.realtimecolors.com/?colors=0c0a09-f5f5f4-f59f0a-56534e-443dff&fonts=Inter%20Tight-Inter */
/* --text: #0c0a09;
--background: #f5f5f4;
--primary: #f59f0a;
--primary-light: #d97706;
--secondary: #56534e;
 */

@tailwind base;
@tailwind utilities;
@tailwind components;

/* Prevent horizontal scroll globally */
body {
  overflow-x: hidden;
}

/* CSS-only tooltips */
.tooltip {
  position: relative;
}

.tooltip::before {
  content: attr(data-tooltip);
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.9);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: normal;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease-in-out;
  z-index: 1000;
}

.tooltip::after {
  content: "";
  position: absolute;
  bottom: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid rgba(0, 0, 0, 0.9);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease-in-out;
  z-index: 1000;
}

.tooltip:hover::before,
.tooltip:hover::after {
  opacity: 1;
}

/* Link preview cards */
.link-preview {
  position: fixed;
  z-index: 1000;
  width: 480px;
  max-width: calc(100vw - 2rem);
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease-in-out;
}

.link-preview.visible {
  opacity: 1;
}

.link-preview-image {
  width: 100%;
  height: 240px;
  object-fit: cover;
  background: linear-gradient(
    135deg,
    rgba(209, 91, 53, 0.1) 0%,
    rgba(184, 69, 28, 0.1) 100%
  );
}

.link-preview-content {
  padding: 12px 16px;
}

.link-preview-title {
  font-size: 16px;
  font-weight: 600;
  color: #0c0a09;
  margin: 0 0 6px 0;
  line-height: 1.3;
}

.link-preview-desc {
  font-size: 13px;
  color: #56534e;
  margin: 0;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Dark mode styles */
:root.dark .link-preview {
  background: #1f2937;
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

:root.dark .link-preview-title {
  color: #e5e7eb;
}

:root.dark .link-preview-desc {
  color: #9ca3af;
}

:root.dark .link-preview-image {
  background: linear-gradient(
    135deg,
    rgba(255, 136, 84, 0.1) 0%,
    rgba(227, 110, 72, 0.1) 100%
  );
}

/* Hide on mobile */
@media (max-width: 768px) {
  .link-preview {
    display: none;
  }
}

@layer base {
  :root {
    --primary: 209 91 53; /* #D15B35 */
    --primary-dark: 184 69 28; /* #B8451C - brighter but still with good contrast */
    --primary-bright: 255 118 84; /* #FF7654 - brighter for dark mode */
    --background: 255 255 255;
    --text: 20 14 4;
    --shopify: 150 191 72; /* Shopify green #96bf48 */
  }

  :root.dark {
    --primary: 209 91 53; /* #D15B35 */
    --primary-light: 227 110 72; /* #e36e48 - lighter version for dark mode */
    --primary-dark: 184 69 28; /* #B8451C - brighter but still with good contrast */
    --primary-bright: 255 136 84; /* #FF8854 - even brighter for dark mode */
    --background: 17 24 39;
    --text: 229 231 235;
  }

  html {
    @apply scroll-m-20 overflow-auto scroll-smooth bg-white text-text selection:bg-primary selection:text-background dark:bg-gray-900 dark:text-gray-200;
  }

  body {
    @apply font-sans text-base md:text-lg;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-secondary font-normal dark:text-gray-100;
    line-height: 1.4em !important;
  }

  /* Content styling */
  .main-content-wrapper {
    @apply text-base leading-7 tracking-normal md:text-lg md:leading-8;
  }

  .main-content-wrapper h1 code,
  .main-content-wrapper h2 code,
  .main-content-wrapper h3 code,
  .main-content-wrapper h4 code,
  .main-content-wrapper h5 code,
  .main-content-wrapper h6 code {
    font-size: inherit;
  }

  /* Headings - preserve Georgia font as required */
  .main-content-wrapper h1 {
    @apply mb-10 mt-14 font-secondary text-4xl font-normal md:text-5xl;
  }

  .main-content-wrapper h2 {
    @apply mb-10 mt-14 font-secondary text-3xl font-normal md:text-4xl;
  }

  .main-content-wrapper h3 {
    @apply mb-10 mt-14 font-secondary text-2xl font-semibold md:text-3xl;
  }

  .main-content-wrapper h4 {
    @apply mb-8 mt-12 font-secondary text-xl font-semibold md:text-2xl;
  }

  .main-content-wrapper h5 {
    @apply mb-6 mt-10 font-secondary text-lg font-semibold md:text-xl;
  }

  .main-content-wrapper h6 {
    @apply mb-6 mt-10 font-secondary text-base font-bold md:text-lg;
  }

  .main-content-wrapper h1:not([class*="text-"]),
  .main-content-wrapper h2:not([class*="text-"]),
  .main-content-wrapper h3:not([class*="text-"]),
  .main-content-wrapper h4:not([class*="text-"]),
  .main-content-wrapper h5:not([class*="text-"]),
  .main-content-wrapper h6:not([class*="text-"]) {
    @apply text-slate-800 dark:text-gray-100;
  }

  /* Paragraphs */
  .main-content-wrapper p:not([class*="mb-"]),
  .main-content-wrapper li {
    @apply mb-5;
  }

  /* Links with arrow */
  .main-content-wrapper a:not([class*="text-"]) {
    @apply font-bold text-primary-dark underline decoration-1 underline-offset-2 transition-all dark:text-primary-bright;
  }

  .main-content-wrapper a[href^="http"]:not(:has(img))::after {
    content: "â†—";
  }

  /* Lists */
  .main-content-wrapper ul {
    @apply my-6 list-disc pl-6 marker:text-primary dark:marker:text-primary-light;
  }

  .main-content-wrapper ol {
    @apply my-6 list-decimal pl-6 marker:text-primary dark:marker:text-primary-light;
  }

  /* Site logo styling with star icon default and home icon on hover */
  .mfyz-logo {
    display: inline-block;
    position: relative;
    padding-left: 30px; /* Space for the icon */
    transition: opacity 0.3s ease;
  }

  .mfyz-logo::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    background: url("/images/star-icon.svg") no-repeat center center;
    background-size: contain !important;
    transition: opacity 0.3s ease;
  }

  /* Support for class-based dark mode */
  .dark .mfyz-logo::before,
  .dark .mfyz-logo::after {
    filter: invert(1);
  }

  .mfyz-logo::after {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    background: url("/images/home.svg") no-repeat center center;
    background-size: contain !important;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .mfyz-logo:hover::before {
    opacity: 0;
  }

  .mfyz-logo:hover::after {
    opacity: 1;
  }

  /* Nested lists - reduce spacing */
  .main-content-wrapper ul ul,
  .main-content-wrapper ul ol,
  .main-content-wrapper ol ul,
  .main-content-wrapper ol ol {
    @apply my-2 pl-4;
  }

  .main-content-wrapper ul li,
  .main-content-wrapper ol li {
    @apply mb-3 ml-3 pl-1;
  }

  .main-content-wrapper li:last-child {
    @apply mb-0;
  }

  /* Blockquotes */
  .main-content-wrapper blockquote {
    @apply my-6 border-l-4 border-primary bg-primary/10 py-4 pl-4 italic dark:bg-primary/20;
  }

  .main-content-wrapper blockquote p:last-child {
    @apply mb-0;
  }

  /* Remove margin from last paragraph in Note component */
  .main-content-wrapper .note-content p:last-child {
    @apply mb-1;
  }

  /* Code blocks */
  .main-content-wrapper pre {
    @apply my-6 overflow-x-auto rounded-md bg-slate-100 p-4 text-sm dark:bg-slate-800 md:text-base;
    /* Ensure code blocks never exceed container width */
    max-width: 100%;
    width: 100%;
    /* Additional constraints for mobile to prevent page-wide horizontal scroll */
    min-width: 0;
    box-sizing: border-box;
  }

  /* Ensure main content wrapper itself is properly constrained */
  .main-content-wrapper {
    max-width: 100%;
    min-width: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  /* Word wrap for code blocks when enabled */
  .main-content-wrapper pre.word-wrap-enabled {
    @apply whitespace-pre-wrap break-words;
  }

  /* Style for the code block button group */
  .code-buttons-group {
    @apply transform shadow-sm transition-transform duration-200 hover:scale-105;
  }

  /* Style for individual code block buttons */
  .copy-code,
  .wrap-code {
    @apply transition-colors duration-200 hover:bg-slate-600 dark:hover:bg-slate-600;
  }

  /* Add subtle shadow to make button group stand out more */
  .code-buttons-group {
    @apply shadow;
  }

  /* Inline code styles */
  .main-content-wrapper :not(pre) > code {
    @apply rounded bg-primary/20 px-2 py-0.5 dark:bg-primary/30;
  }
  .main-content-wrapper
    :not(pre):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6)
    > code {
    @apply text-xs md:text-sm;
  }

  /* Tables */
  .main-content-wrapper table {
    @apply my-6 w-full border-collapse;
  }

  .main-content-wrapper th {
    @apply border border-gray-300 bg-gray-100 px-4 py-2 text-left dark:border-gray-700 dark:bg-gray-800;
  }

  .main-content-wrapper td {
    @apply border border-gray-300 px-4 py-2 dark:border-gray-700;
  }

  /* Images */
  .main-content-wrapper img {
    @apply my-6 rounded-md;
    /* hover:scale-105 transition-transform */
  }

  .main-content-wrapper hr {
    @apply mb-14 mt-14;
  }

  /* Remove any extra spacing */
  .main-content-wrapper > *:first-child {
    @apply mt-0;
  }

  .main-content-wrapper > *:last-child {
    @apply mb-0;
  }

  /* Softer borders for feature boxes in dark mode */
  .dark .border-gray-200 {
    @apply border-gray-700/50;
  }

  /* Note box in dark mode */
  .dark .bg-primary\/10 {
    @apply bg-primary/20;
  }
}

@layer components {
  .btn-secondary {
    @apply inline-block rounded-lg border border-gray-200 px-6 py-3 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800;
  }

  .btn-icon {
    @apply rounded-full p-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800;
  }
}

@layer utilities {
  .tag {
    @apply rounded-md bg-primary/15 px-2 py-0.5 text-xs text-primary dark:bg-primary/30 dark:text-primary-light;
  }

  .tag-light {
    @apply rounded-md bg-white/80 px-2 py-0.5 text-xs text-gray-800;
  }
}

.dot {
  opacity: 0;
  animation: dot-blink 1.4s infinite ease-in-out both;
}

.dot:nth-child(1) {
  animation-delay: -0.32s;
}

.dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes dot-blink {
  0%,
  80%,
  100% {
    opacity: 0;
  }
  40% {
    opacity: 1;
  }
}

nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 0;
}

nav a {
  padding: 0.5em 0.5em;
  text-decoration: none;
}

/* Post Bg Patterns */

.blog-bg-pattern {
  background-repeat: no-repeat;
}

.blog-bg-pattern-cone,
.blog-bg-pattern-cone-white,
.blog-bg-pattern-cube,
.blog-bg-pattern-cube-white {
  background-position: 100% 90%;
}

.blog-bg-pattern-triangle,
.blog-bg-pattern-triangle-white,
.blog-bg-pattern-wave,
.blog-bg-pattern-wave-white {
  background-position: right 30px bottom 30px;
}

.blog-bg-pattern-cone {
  background-image: url(/images/post-patterns/pt-cone.svg);
}

.blog-bg-pattern-cone-white,
.blog-bg-pattern-cone.blog-bg-pattern-auto-dark {
  background-image: url(/images/post-patterns/pt-cone-white.svg);
}

.blog-bg-pattern-cube {
  background-image: url(/images/post-patterns/pt-cube.svg);
}

.blog-bg-pattern-cube-white,
.blog-bg-pattern-cube.blog-bg-pattern-auto-dark {
  background-image: url(/images/post-patterns/pt-cube-white.svg);
}

.blog-bg-pattern-triangle {
  background-image: url(/images/post-patterns/pt-triangle.svg);
}

.blog-bg-pattern-triangle-white,
.blog-bg-pattern-triangle.blog-bg-pattern-auto-dark {
  background-image: url(/images/post-patterns/pt-triangle-white.svg);
}

.blog-bg-pattern-wave {
  background-image: url(/images/post-patterns/pt-wave.svg);
}

.blog-bg-pattern-wave-white,
.blog-bg-pattern-wave.blog-bg-pattern-auto-dark {
  background-image: url(/images/post-patterns/pt-wave-white.svg);
}

.giscuss_comments_wrapper {
  /* padding-top: 2rem; */
}

iframe.giscus-frame {
  outline: none;
}

/* Table of Contents sidebar */
#toc-sidebar {
  display: block;
}

#toc-sidebar,
#toc-sidebar a {
  padding: 0;
}

#toc-sidebar .toc-inner {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
}

#toc-sidebar .toc-inner::-webkit-scrollbar {
  width: 3px;
}

#toc-sidebar .toc-inner::-webkit-scrollbar-track {
  background: transparent;
}

#toc-sidebar .toc-inner::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.3);
  border-radius: 3px;
}

/* Blog grid layout - must be in this file (not a separate CSS import)
   because Astro inlines component-imported CSS as <style> tags that load
   BEFORE this external Tailwind-processed CSS file. With equal specificity,
   the later-loading rules here would override the inline ones. */

.blog-grid ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  grid-gap: 0;
}

.blog-grid li {
  margin-bottom: 0;
  border-radius: 0;
  overflow: hidden;
  transition: transform 0.3s ease;
}

.main-content-wrapper .blog-grid a {
  text-decoration: none;
}

.blog-grid h4,
.blog-grid h3 {
  color: #000000;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  font-weight: normal;
}

.dark .blog-grid .bg-\[\#fafafa\] h4,
.dark .blog-grid .bg-\[\#fafafa\] h3 {
  color: #333333;
}

.dark .blog-grid .bg-\[\#fafafa\] .text-gray-500 {
  color: #555555;
}

.blog-grid ul > li {
  padding: 2rem;
  margin: 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  padding-bottom: 6rem;
}

@media (min-width: 640px) {
  .blog-grid ul > li {
    aspect-ratio: 1/1;
    padding-bottom: 2rem;
  }
}

.blog-grid {
  margin-top: 2rem;
  box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.2);
}

.blog-grid .bg-\[\#222\] h4,
.blog-grid .bg-primary h4,
.blog-grid .bg-\[\#222\] h1,
.blog-grid .bg-\[\#222\] h2,
.blog-grid .bg-\[\#222\] h3 {
  color: #ffffff !important;
}
