---
import { getCollection } from "astro:content";
import Layout from "@layouts/Layout.astro";
import BlogGrid from "@components/BlogGrid.astro";
import BlogList from "@components/BlogList.astro";
import "../styles/blog-grid.css";

const posts = (await getCollection("blog", ({ data, id }) => {
  // Exclude Turkish posts (either in tr/ folder or with lang: tr)
  return !data.hidden && !id.startsWith('tr/') && data.lang !== 'tr';
})).sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);

const gridPosts = posts.slice(0, 25);
const listPosts = posts.slice(25);
---

<Layout>
  <div>
    <section class="-mt-10 mb-16">
      <BlogGrid posts={gridPosts} limit={25} />
      
      <div class="blog-archive mt-24">
        <h2>Archive</h2>
        {listPosts.length > 0 && (
          <BlogList posts={listPosts} />
        )}
      </div>
    </section>
  </div>
</Layout>
